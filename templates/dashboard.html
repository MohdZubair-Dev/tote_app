<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>IoT Tote Management Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- TailwindCSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            success: "#16a34a",
            warning: "#f97316",
            critical: "#ef4444",
            info: "#3b82f6",
            cardGreen: "#dcfce7",
            cardYellow: "#fef3c7",
            cardRed: "#fee2e2",
            cardBlue: "#dbeafe",
            cardPurple: "#f3e8ff"
          }
        }
      }
    }
  </script>
</head>

<body class="bg-gray-50 min-h-screen">

<!-- TOP HEADER -->
<header class="flex items-center justify-between px-8 pt-6 pb-4 bg-white shadow-sm">
  <div>
    <h1 class="text-2xl font-bold text-gray-900">IoT Tote Management</h1>
    <p class="text-sm text-gray-500">Monitor live tote telemetry & shipping labels</p>
  </div>
  <button id="refreshBtn"
    class="flex items-center gap-2 px-4 py-2 rounded-xl border bg-white hover:bg-gray-100 text-sm text-gray-700">
    âŸ³ Refresh
  </button>
</header>

<main class="px-8 pb-10 space-y-6 mt-4">

  <!-- KPI CARDS -->
  <section id="kpiSection" class="grid grid-cols-1 md:grid-cols-5 gap-4"></section>

  <!-- SEARCH + FILTERS -->
  <section id="filterSection" class="bg-white rounded-2xl shadow px-4 py-3 flex flex-wrap items-center gap-4"></section>

  <!-- TOTE CARDS -->
  <section id="toteCards" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-5"></section>

</main>

<!-- MODAL BACKDROP -->
<div id="labelModalBackdrop"
     class="hidden fixed inset-0 bg-black/40 backdrop-blur-sm z-40"
     onclick="closeLabelModal()"></div>

<!-- LABEL MODAL -->
<div id="labelModal"
     class="hidden fixed z-50 inset-0 flex items-center justify-center">
  <div class="bg-white rounded-2xl w-[420px] shadow-2xl p-6 relative border border-gray-200">

    <!-- Close -->
    <button onclick="closeLabelModal()"
            class="absolute top-3 right-3 text-gray-400 hover:text-gray-600">âœ•</button>

    <!-- Title -->
    <h2 id="modalTitle" class="text-lg font-semibold mb-4">Barcode Management</h2>

    <!-- Current label -->
    <div class="mb-6">
      <h3 class="text-sm font-medium text-gray-700 mb-2">Current Barcode / QR Label</h3>
      <div class="border rounded-xl p-4 bg-gray-50 flex flex-col items-center w-full">
        <div class="w-full h-24 flex items-center justify-center bg-white rounded-lg mb-3 border">
          <img id="currentBarcodeImg"
               src=""
               alt="Barcode Image"
               class="max-h-20 object-contain"
               onerror="this.style.display='none'; this.parentElement.textContent='No label uploaded yet';">
        </div>
        <a id="downloadBarcodeBtn"
           href="#"
           class="px-3 py-1.5 text-xs rounded-lg border bg-white hover:bg-gray-100">
          â¬‡ Download
        </a>
      </div>
    </div>

    <!-- Upload -->
    <div class="mb-6">
      <h3 class="text-sm font-medium text-gray-700 mb-2">Replace Barcode</h3>
      <label for="barcodeUpload"
             class="cursor-pointer border-2 border-dashed rounded-xl p-6 flex flex-col items-center justify-center bg-purple-50 text-purple-700 hover:bg-purple-100 transition">
        <div class="text-4xl mb-2">ðŸŸ£</div>
        <p class="text-sm font-medium">Select a label image to upload</p>
        <p class="text-xs text-gray-500">PNG, JPG, GIF (max 5MB)</p>

        <div class="mt-4 px-4 py-2 bg-white rounded-lg shadow text-sm">Choose File</div>
      </label>
      <input id="barcodeUpload" type="file" accept="image/*" class="hidden">
    </div>

    <!-- Modal Actions -->
    <div class="flex justify-end gap-2">
      <button onclick="closeLabelModal()"
              class="px-4 py-2 rounded-lg bg-gray-100 hover:bg-gray-200 text-sm">Cancel</button>
      <button id="uploadBtn"
              class="px-4 py-2 rounded-lg bg-indigo-600 text-white hover:bg-indigo-700 text-sm">Upload</button>
    </div>

  </div>
</div>

<!-- Load JS Logic -->
<script src="/static/js/dashboard.js"></script>

</body>
</html>
